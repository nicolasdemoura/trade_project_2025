# Trade Project 1: Estimating Trump's Tariff Impact on Global Welfare

## Project Overview

This project implements a multi-sector Eaton and Kortum (2002) model using WIOD 2011 Input-Output tables to analyze the economic impact of Trump's proposed tariffs on global welfare.

## Methodology

Following Costinot, Donaldson, and Komunjer (2012):
- Labor is the only factor and is mobile across sectors
- Technology parameters estimated using regression on bilateral trade flows (Section 5.1)
- Trade elasticity from CDK (2012) Table 3
- Wages calibrated to match observed trade balances and shares
- Trade costs backed out from observed data

## Data Sources

- **WIOD 2011 Input-Output Tables** (`wiot_full.dta`): Bilateral trade flows and sectoral outputs
- **WIOD Socio-Economic Accounts** (`Socio_Economic_Accounts_July14.xlsx`): Labor inputs and employment data

## File Structure

### Core Analysis Files

- `main.R` - Main analysis script that runs the complete workflow
- `functions.R` - Core Eaton-Kortum model functions
- `data_cleaning.R` - Data preparation and cleaning functions  
- `estimation.R` - Parameter estimation (CDK 2012 approach)
- `counterfactual.R` - Trump tariff scenarios and welfare analysis

### Utility Files

- `explore_data.R` - Data structure exploration script
- `run_exploration.R` - Quick script to run data exploration

## Trump Tariff Scenario

Based on 2024 campaign proposals:
- 10-20% universal tariff on all US imports (using 15% average)
- 60% tariff on Chinese imports to US
- Additional robustness scenarios: moderate, aggressive, targeted

## Key Functions

### Model Functions (`functions.R`)
- `calculate_trade_share()` - EK trade share equation
- `calculate_price_index()` - Price index calculation
- `solve_equilibrium()` - Equilibrium wage solver
- `calculate_welfare()` - Real income per capita

### Estimation Functions (`estimation.R`)
- `estimate_technology_params()` - CDK (2012) Section 5.1 approach
- `calibrate_baseline_equilibrium()` - Match observed trade patterns
- `check_model_fit()` - Model validation against GDP data

### Counterfactual Functions (`counterfactual.R`)
- `create_trump_tariff_scenario()` - Define tariff matrices
- `compute_counterfactual_equilibrium()` - Solve with tariffs
- `analyze_welfare_effects()` - Calculate welfare changes

## Usage

### Quick Start

1. **Explore Data Structure**:
```r
source("code/run_exploration.R")
```

2. **Run Full Analysis**:
```r
source("code/main.R")
```

### Step-by-Step Workflow

```r
# Load functions
source("code/functions.R")
source("code/data_cleaning.R")
source("code/estimation.R")
source("code/counterfactual.R")

# Clean data
cleaned_data <- clean_all_data(wiot_full, socioeco)

# Estimate parameters
theta <- estimate_trade_elasticity(NULL)
tech_params <- estimate_technology_params(regression_data, theta)

# Calibrate baseline
baseline <- calibrate_baseline_equilibrium(trade_shares, T_matrix, labor_data, theta)

# Run counterfactual
trump_tariffs <- create_trump_tariff_scenario(countries, sectors)
counterfactual <- compute_counterfactual_equilibrium(baseline, trump_tariffs, theta)

# Analyze welfare
welfare_results <- analyze_welfare_effects(baseline, counterfactual, countries)
```

## Output

### Tables (saved to `Tables/` directory)
- `trump_tariff_results.xlsx` - Main results with baseline and counterfactual welfare
- `welfare_analysis.xlsx` - Detailed welfare decomposition by country
- `scenario_comparison.xlsx` - Robustness across different tariff scenarios

### Key Results
- Global welfare change under Trump tariffs
- Country-specific welfare impacts (winners vs losers)
- Decomposition into wage and price effects
- Model fit diagnostics (correlation with observed GDP per capita)

## Model Validation

The model includes diagnostic checks:
- Trade share correlation between model and data
- GDP per capita correlation (real income vs observed GDP)
- Trade balance validation
- Parameter reasonableness checks

## Dependencies

Required R packages:
```r
install.packages(c("dplyr", "ggplot2", "stargazer", "readxl", "tidyverse", 
                   "data.table", "lubridate", "fixest", "pracma", "remotes", 
                   "tidyr", "nprobust", "chron", "haven", "readr", "writexl", 
                   "modelsummary", "lmtest", "progress"))
```

## Notes

- The project assumes labor is the only factor of production and is mobile across sectors
- Trade costs are backed out endogenously from observed trade patterns
- Multiple tariff scenarios provide robustness checks
- Results should be interpreted as partial equilibrium effects within the EK framework

## References

- Costinot, A., Donaldson, D., & Komunjer, I. (2012). What goods do countries trade? A quantitative exploration of Ricardo's ideas. *Review of Economic Studies*, 79(2), 581-608.
- Eaton, J., & Kortum, S. (2002). Technology, geography, and trade. *Econometrica*, 70(5), 1741-1779.

## Contact

NÃ­colas de Moura  
Email: nicolasgoulartdemoura@gmail.com  
Date: October 1, 2025